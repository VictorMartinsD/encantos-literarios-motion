.signatures {
  padding: 104px 0 104px 0;
  overflow: hidden;
  background-image: url(../../assets/img/bg-signatures.svg);

  .bg-blur {
    position: absolute;
    z-index: -1;

    width: 944px;
    height: 944px;

    left: 50%;
    top: 60%;
    transform: translate(-50%, -50%);

    background: radial-gradient(circle, rgba(0, 15, 31, 1) 0%, rgba(0, 15, 31, 0.8) 30%, transparent 70%);
    filter: blur(100px);
    pointer-events: none;
  }

  h1:nth-child(1) {
    font: var(--title-sm);
    text-align: center;
    max-width: 270px;
    margin-inline: auto;
    margin-bottom: 48px;
  }

  .title-signature-blue,
  .title-signature-pink {
    font: var(--title-xs);
  }

  .title-signature-blue {
    color: var(--blue-light);
  }

  .title-signature-pink {
    color: var(--pink-light);
  }

  .monthly-price,
  .semi-annual-price,
  .annual-price {
    justify-self: center;
    padding: 32px 32px 28px;
    flex-direction: column;

    height: 400px;
    border-radius: 24px;
    border: 1px solid var(--shape-stroke);
    background-color: var(--shape-base);
  }

  .benefits-container {
    margin-top: auto;
    flex-direction: column;
  }

  .benefits {
    flex-direction: column;
    justify-content: space-between;
  }

  h2 {
    font: var(--title-md);
    margin: 24px 0 8px 0;
  }

  h2 + p {
    font: var(--body-sm);
    color: var(--text-label);
  }

  svg + p {
    font: var(--body-xs);
    color: var(--text-body);
  }

  h2 small {
    font: var(--title-xs);
  }

  span {
    background-color: var(--shape-stroke);
    border-radius: 999px;
    padding: 9px 20px;
    left: 175px;
    top: 23px;

    p {
      font: var(--tag);
      letter-spacing: 0.05em;
    }
  }

  .buttons {
    padding-top: 24px;
    justify-content: center;
  }

  .star {
    fill: var(--pink-base);
    flex-shrink: 0;
    width: 1rem;
    height: 1rem;
  }

  .star-lg {
    width: 26px;
    height: 26px;
  }

  .star-md {
    width: 14px;
    height: 14px;
    filter: drop-shadow(0 0 12px #882f9759);
  }

  .star-sm {
    width: 13px;
    height: 13px;
  }

  .star-blue {
    fill: var(--blue-base);
  }

  .bunny {
    fill: var(--pink-base);
    width: 45.05px;
    height: 49.93px;
    top: -50px;
  }

  .star-lg-1 {
    top: -30px;
    left: -25px;
  }

  .star-sm-1 {
    top: 5px;
    left: -35px;
  }

  .star-lg-2 {
    bottom: -15px;
    right: -50px;
  }

  .star-sm-2 {
    bottom: -25px;
    right: -0px;
  }
}

@media (width >= 80em) {
  .signatures {
    padding: 0 0 184px 0;

    h1:nth-child(1) {
      max-width: 300px;
      margin-bottom: 138px;
    }

    .option-signatures {
      display: flex;
      justify-content: center;
    }

    /* Controla a animação de 'fan-out' (espalhar) dos cards de planos.
      A classe .is-active é disparada via JS no primeiro hover da seção.
    */
    .monthly-price,
    .annual-price {
      z-index: 0;
      margin: 0;

      animation-duration: 0.8s;
      animation-timing-function: cubic-bezier(0.25, 1, 0.5, 1);
      animation-fill-mode: forwards;

      transition:
        background-color 0.5s ease,
        translate 0.5s ease,
        box-shadow 0.5s ease;
    }

    .monthly-price {
      transform: rotate(-8deg) translateX(7px) translateY(70px);
      margin: 0;
      opacity: 1;
    }

    .annual-price {
      transform: rotate(8deg) translateX(-7px) translateY(70px);
      margin: 0;
      opacity: 1;
    }

    .option-signatures:not(.is-active) .monthly-price {
      margin-right: -340px;
      transform: rotate(0deg) translateX(-34px) translateY(0);
      transition:
        transform 0.6s ease,
        margin 0.6s ease;
    }

    .option-signatures:not(.is-active) .annual-price {
      margin-left: -340px;
      transform: rotate(0deg) translateX(34px) translateY(0);
      transition:
        transform 0.6s ease,
        margin 0.6s ease;
    }

    .option-signatures.is-active .monthly-price {
      animation: spreadMonthly 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
    }

    .option-signatures.is-active .annual-price {
      animation: spreadAnnual 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
    }

    .semi-annual-price {
      z-index: 2;
      background-color: var(--shape-hover) !important;
      transition:
        background-color 0.3s ease,
        translate 0.3s ease,
        box-shadow 0.3s ease;
    }

    .option-signatures.is-active .monthly-price,
    .option-signatures.is-active .semi-annual-price,
    .option-signatures.is-active .annual-price {
      background-color: var(--shape-base) !important;
    }

    .option-signatures .monthly-price:hover,
    .option-signatures .semi-annual-price:hover,
    .option-signatures .annual-price:hover {
      background-color: var(--shape-hover) !important;
      z-index: 10 !important;
      translate: 0 -10px;
      box-shadow: 0 0 66px 0 rgba(53, 139, 185, 0.1);
    }

    /* Mantém o destaque no plano central (Semestral) apenas quando
      nenhum outro card estiver em foco (hover).
    */
    .option-signatures.is-active:not(:has(> div:hover)) .semi-annual-price {
      background-color: var(--shape-hover) !important;
    }

    .monthly-price .star-lg-1,
    .monthly-price .star-sm-1,
    .annual-price .star-lg-2,
    .annual-price .star-sm-2 {
      transition: transform 0.5s ease;
    }
    .monthly-price:hover .star-lg-1 {
      transform: rotate(-15deg);
    }
    .monthly-price:hover .star-sm-1 {
      transform: rotate(15deg);
    }
    .annual-price:hover .star-lg-2 {
      transform: rotate(15deg);
    }
    .annual-price:hover .star-sm-2 {
      transform: rotate(-15deg);
    }
  }
}
